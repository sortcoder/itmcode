"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _express = _interopRequireDefault(require("express"));

var _mongodb = require("mongodb");

var _expressValidator = require("express-validator");

var _UserController = _interopRequireDefault(require("../Controller/UserController"));

var _JwtVerify = _interopRequireDefault(require("../Middlewares/JwtVerify"));

var _VerifyAdminScope = _interopRequireDefault(require("../Middlewares/VerifyAdminScope"));

var _FileUploader = _interopRequireDefault(require("../Middlewares/FileUploader"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var router = _express.default.Router();

router.get('', _JwtVerify.default, _UserController.default.index);
router.get('/kycrequest', _JwtVerify.default, _UserController.default.kycrequest);
router.post('/change-password', _JwtVerify.default, _UserController.default.changePassword);
router.get('/my-visitors', _JwtVerify.default, _UserController.default.myVisitors);
router.get('/matches', _JwtVerify.default, _UserController.default.myBestMatches);
router.get('/invites', _JwtVerify.default, _UserController.default.myInviteHistory);
router.get('/invites-earn', _JwtVerify.default, _UserController.default.invitesEarn);
router.get('/top-fans/:id', _JwtVerify.default, _UserController.default.myTopFans);
router.get('/recent-fans/:id', _JwtVerify.default, _UserController.default.recentFans);
router.get('/:id', _JwtVerify.default, (0, _expressValidator.param)('id').customSanitizer(value => {
  try {
    return (0, _mongodb.ObjectId)(value);
  } catch (err) {
    return err;
  }
}), _UserController.default.single);
router.put('', _JwtVerify.default, _FileUploader.default.fields([{
  name: 'profilePic',
  maxCount: 1
}, {
  name: 'kycImage',
  maxCount: 1
}]), _UserController.default.update);
router.put('/:id', _JwtVerify.default, _VerifyAdminScope.default, _FileUploader.default.single('profilePic'), _UserController.default.updateUserByAdmin);
router.delete('/:id', _JwtVerify.default, (0, _expressValidator.param)('id').customSanitizer(value => {
  try {
    return (0, _mongodb.ObjectId)(value);
  } catch (err) {
    return err;
  }
}), _UserController.default.remove);
router.get('/match/:userId', _JwtVerify.default, (0, _expressValidator.param)('userId').customSanitizer(value => {
  try {
    return (0, _mongodb.ObjectId)(value);
  } catch (err) {
    return err;
  }
}), _UserController.default.matchProfile);
router.get('/follow/:userId', _JwtVerify.default, (0, _expressValidator.param)('userId').customSanitizer(value => {
  try {
    return (0, _mongodb.ObjectId)(value);
  } catch (err) {
    return err;
  }
}), _UserController.default.followUnfollowUser);
router.get('/like/:userId', _JwtVerify.default, (0, _expressValidator.param)('userId').customSanitizer(value => {
  try {
    return (0, _mongodb.ObjectId)(value);
  } catch (err) {
    return err;
  }
}), _UserController.default.likeDislikeUser);
router.get('/review/:userId', _JwtVerify.default, (0, _expressValidator.param)('userId').customSanitizer(value => {
  try {
    return (0, _mongodb.ObjectId)(value);
  } catch (err) {
    return err;
  }
}), _UserController.default.reviewProfile);
router.post('/subscribe', _JwtVerify.default, _UserController.default.subscribe);
router.post('/recent/:id', _JwtVerify.default, (0, _expressValidator.param)('id').customSanitizer(value => {
  try {
    return (0, _mongodb.ObjectId)(value);
  } catch (err) {
    return err;
  }
}), _UserController.default.recentSingle);
router.post('/recent', _JwtVerify.default, _UserController.default.recentDeleteAll);
router.post('/admin/plan', _JwtVerify.default, _VerifyAdminScope.default, _UserController.default.subscribeByAdmin);
router.put('/block/:id', _JwtVerify.default, _VerifyAdminScope.default, _UserController.default.blockUnblockUser);
router.post('/give-away', _JwtVerify.default, _UserController.default.giveAwayToUser);
router.get('/give-away/list', _JwtVerify.default, _VerifyAdminScope.default, _UserController.default.giveAwayList);
router.put('/verify/:id', _JwtVerify.default, _VerifyAdminScope.default, _UserController.default.verifyUser);
router.put('/reject/:id', _JwtVerify.default, _VerifyAdminScope.default, _UserController.default.rejectUser);
router.get('/acceptLike/:id/:status', _JwtVerify.default, _UserController.default.acceptLike);
router.post('/kycupdate', _JwtVerify.default, _FileUploader.default.single('kycImage'), _UserController.default.kycImageUpload);
router.post('/deleteRequest', _JwtVerify.default, _UserController.default.deleteRequest);
router.post('/updateDeleteRequest', _JwtVerify.default, _UserController.default.updateDeleteRequest);
router.get('/adminGift/:id', _JwtVerify.default, _UserController.default.adminGift);
router.post('/useGiftPlan', _JwtVerify.default, _UserController.default.useGiftPlan);
var _default = router;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yb3V0ZXMvVXNlclJvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZ2V0IiwiSnd0VmVyaWZ5IiwiVXNlciIsImluZGV4Iiwia3ljcmVxdWVzdCIsInBvc3QiLCJjaGFuZ2VQYXNzd29yZCIsIm15VmlzaXRvcnMiLCJteUJlc3RNYXRjaGVzIiwibXlJbnZpdGVIaXN0b3J5IiwiaW52aXRlc0Vhcm4iLCJteVRvcEZhbnMiLCJyZWNlbnRGYW5zIiwiY3VzdG9tU2FuaXRpemVyIiwidmFsdWUiLCJlcnIiLCJzaW5nbGUiLCJwdXQiLCJ1cGxvYWQiLCJmaWVsZHMiLCJuYW1lIiwibWF4Q291bnQiLCJ1cGRhdGUiLCJWZXJpZnlBZG1pblNjb3BlIiwidXBkYXRlVXNlckJ5QWRtaW4iLCJkZWxldGUiLCJyZW1vdmUiLCJtYXRjaFByb2ZpbGUiLCJmb2xsb3dVbmZvbGxvd1VzZXIiLCJsaWtlRGlzbGlrZVVzZXIiLCJyZXZpZXdQcm9maWxlIiwic3Vic2NyaWJlIiwicmVjZW50U2luZ2xlIiwicmVjZW50RGVsZXRlQWxsIiwic3Vic2NyaWJlQnlBZG1pbiIsImJsb2NrVW5ibG9ja1VzZXIiLCJnaXZlQXdheVRvVXNlciIsImdpdmVBd2F5TGlzdCIsInZlcmlmeVVzZXIiLCJyZWplY3RVc2VyIiwiYWNjZXB0TGlrZSIsImt5Y0ltYWdlVXBsb2FkIiwiZGVsZXRlUmVxdWVzdCIsInVwZGF0ZURlbGV0ZVJlcXVlc3QiLCJhZG1pbkdpZnQiLCJ1c2VHaWZ0UGxhbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBUEEsSUFBTUEsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQVNBRixNQUFNLENBQUNHLEdBQVAsQ0FBVyxFQUFYLEVBQWVDLGtCQUFmLEVBQTBCQyx3QkFBS0MsS0FBL0I7QUFDQU4sTUFBTSxDQUFDRyxHQUFQLENBQVcsYUFBWCxFQUEwQkMsa0JBQTFCLEVBQXFDQyx3QkFBS0UsVUFBMUM7QUFFQVAsTUFBTSxDQUFDUSxJQUFQLENBQVksa0JBQVosRUFBZ0NKLGtCQUFoQyxFQUEyQ0Msd0JBQUtJLGNBQWhEO0FBRUFULE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGNBQVgsRUFBMkJDLGtCQUEzQixFQUFzQ0Msd0JBQUtLLFVBQTNDO0FBRUFWLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLFVBQVgsRUFBdUJDLGtCQUF2QixFQUFrQ0Msd0JBQUtNLGFBQXZDO0FBRUFYLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLFVBQVgsRUFBdUJDLGtCQUF2QixFQUFrQ0Msd0JBQUtPLGVBQXZDO0FBQ0FaLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGVBQVgsRUFBNEJDLGtCQUE1QixFQUF1Q0Msd0JBQUtRLFdBQTVDO0FBRUFiLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGVBQVgsRUFBNEJDLGtCQUE1QixFQUF1Q0Msd0JBQUtTLFNBQTVDO0FBQ0FkLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGtCQUFYLEVBQStCQyxrQkFBL0IsRUFBMENDLHdCQUFLVSxVQUEvQztBQUVBZixNQUFNLENBQUNHLEdBQVAsQ0FBVyxNQUFYLEVBQW1CQyxrQkFBbkIsRUFDSSw2QkFBTSxJQUFOLEVBQVlZLGVBQVosQ0FBNEJDLEtBQUssSUFBSTtBQUNqQyxNQUFJO0FBQ0EsV0FBTyx1QkFBU0EsS0FBVCxDQUFQO0FBQ0gsR0FGRCxDQUVFLE9BQU9DLEdBQVAsRUFBWTtBQUNWLFdBQU9BLEdBQVA7QUFDSDtBQUNKLENBTkQsQ0FESixFQVFJYix3QkFBS2MsTUFSVDtBQVVBbkIsTUFBTSxDQUFDb0IsR0FBUCxDQUFXLEVBQVgsRUFBZWhCLGtCQUFmLEVBQ0lpQixzQkFBT0MsTUFBUCxDQUFjLENBQUM7QUFDWEMsRUFBQUEsSUFBSSxFQUFFLFlBREs7QUFDU0MsRUFBQUEsUUFBUSxFQUFFO0FBRG5CLENBQUQsRUFFWDtBQUNDRCxFQUFBQSxJQUFJLEVBQUUsVUFEUDtBQUNtQkMsRUFBQUEsUUFBUSxFQUFFO0FBRDdCLENBRlcsQ0FBZCxDQURKLEVBS1VuQix3QkFBS29CLE1BTGY7QUFPQXpCLE1BQU0sQ0FBQ29CLEdBQVAsQ0FBVyxNQUFYLEVBQW1CaEIsa0JBQW5CLEVBQThCc0IseUJBQTlCLEVBQWdETCxzQkFBT0YsTUFBUCxDQUFjLFlBQWQsQ0FBaEQsRUFBNkVkLHdCQUFLc0IsaUJBQWxGO0FBRUEzQixNQUFNLENBQUM0QixNQUFQLENBQWMsTUFBZCxFQUFzQnhCLGtCQUF0QixFQUNJLDZCQUFNLElBQU4sRUFBWVksZUFBWixDQUE0QkMsS0FBSyxJQUFJO0FBQ2pDLE1BQUk7QUFDQSxXQUFPLHVCQUFTQSxLQUFULENBQVA7QUFDSCxHQUZELENBRUUsT0FBT0MsR0FBUCxFQUFZO0FBQ1YsV0FBT0EsR0FBUDtBQUNIO0FBQ0osQ0FORCxDQURKLEVBUUliLHdCQUFLd0IsTUFSVDtBQVVBN0IsTUFBTSxDQUFDRyxHQUFQLENBQVcsZ0JBQVgsRUFBNkJDLGtCQUE3QixFQUNJLDZCQUFNLFFBQU4sRUFBZ0JZLGVBQWhCLENBQWdDQyxLQUFLLElBQUk7QUFDckMsTUFBSTtBQUNBLFdBQU8sdUJBQVNBLEtBQVQsQ0FBUDtBQUNILEdBRkQsQ0FFRSxPQUFPQyxHQUFQLEVBQVk7QUFDVixXQUFPQSxHQUFQO0FBQ0g7QUFDSixDQU5ELENBREosRUFPUWIsd0JBQUt5QixZQVBiO0FBU0E5QixNQUFNLENBQUNHLEdBQVAsQ0FBVyxpQkFBWCxFQUE4QkMsa0JBQTlCLEVBQ0ksNkJBQU0sUUFBTixFQUFnQlksZUFBaEIsQ0FBZ0NDLEtBQUssSUFBSTtBQUNyQyxNQUFJO0FBQ0EsV0FBTyx1QkFBU0EsS0FBVCxDQUFQO0FBQ0gsR0FGRCxDQUVFLE9BQU9DLEdBQVAsRUFBWTtBQUNWLFdBQU9BLEdBQVA7QUFDSDtBQUNKLENBTkQsQ0FESixFQVFJYix3QkFBSzBCLGtCQVJUO0FBVUEvQixNQUFNLENBQUNHLEdBQVAsQ0FBVyxlQUFYLEVBQTRCQyxrQkFBNUIsRUFDSSw2QkFBTSxRQUFOLEVBQWdCWSxlQUFoQixDQUFnQ0MsS0FBSyxJQUFJO0FBQ3JDLE1BQUk7QUFDQSxXQUFPLHVCQUFTQSxLQUFULENBQVA7QUFDSCxHQUZELENBRUUsT0FBT0MsR0FBUCxFQUFZO0FBQ1YsV0FBT0EsR0FBUDtBQUNIO0FBQ0osQ0FORCxDQURKLEVBUUliLHdCQUFLMkIsZUFSVDtBQVVBaEMsTUFBTSxDQUFDRyxHQUFQLENBQVcsaUJBQVgsRUFBOEJDLGtCQUE5QixFQUNJLDZCQUFNLFFBQU4sRUFBZ0JZLGVBQWhCLENBQWdDQyxLQUFLLElBQUk7QUFDckMsTUFBSTtBQUNBLFdBQU8sdUJBQVNBLEtBQVQsQ0FBUDtBQUNILEdBRkQsQ0FFRSxPQUFPQyxHQUFQLEVBQVk7QUFDVixXQUFPQSxHQUFQO0FBQ0g7QUFDSixDQU5ELENBREosRUFRSWIsd0JBQUs0QixhQVJUO0FBVUFqQyxNQUFNLENBQUNRLElBQVAsQ0FBWSxZQUFaLEVBQTBCSixrQkFBMUIsRUFBcUNDLHdCQUFLNkIsU0FBMUM7QUFFQWxDLE1BQU0sQ0FBQ1EsSUFBUCxDQUFZLGFBQVosRUFBMkJKLGtCQUEzQixFQUNJLDZCQUFNLElBQU4sRUFBWVksZUFBWixDQUE0QkMsS0FBSyxJQUFJO0FBQ2pDLE1BQUk7QUFDQSxXQUFPLHVCQUFTQSxLQUFULENBQVA7QUFDSCxHQUZELENBRUUsT0FBT0MsR0FBUCxFQUFZO0FBQ1YsV0FBT0EsR0FBUDtBQUNIO0FBQ0osQ0FORCxDQURKLEVBUUliLHdCQUFLOEIsWUFSVDtBQVVBbkMsTUFBTSxDQUFDUSxJQUFQLENBQVksU0FBWixFQUF1Qkosa0JBQXZCLEVBQWtDQyx3QkFBSytCLGVBQXZDO0FBRUFwQyxNQUFNLENBQUNRLElBQVAsQ0FBWSxhQUFaLEVBQTJCSixrQkFBM0IsRUFBc0NzQix5QkFBdEMsRUFBd0RyQix3QkFBS2dDLGdCQUE3RDtBQUVBckMsTUFBTSxDQUFDb0IsR0FBUCxDQUFXLFlBQVgsRUFBeUJoQixrQkFBekIsRUFBb0NzQix5QkFBcEMsRUFBc0RyQix3QkFBS2lDLGdCQUEzRDtBQUVBdEMsTUFBTSxDQUFDUSxJQUFQLENBQVksWUFBWixFQUEwQkosa0JBQTFCLEVBQXNDQyx3QkFBS2tDLGNBQTNDO0FBRUF2QyxNQUFNLENBQUNHLEdBQVAsQ0FBVyxpQkFBWCxFQUE4QkMsa0JBQTlCLEVBQXlDc0IseUJBQXpDLEVBQTJEckIsd0JBQUttQyxZQUFoRTtBQUVBeEMsTUFBTSxDQUFDb0IsR0FBUCxDQUFXLGFBQVgsRUFBMEJoQixrQkFBMUIsRUFBcUNzQix5QkFBckMsRUFBdURyQix3QkFBS29DLFVBQTVEO0FBQ0F6QyxNQUFNLENBQUNvQixHQUFQLENBQVcsYUFBWCxFQUEwQmhCLGtCQUExQixFQUFxQ3NCLHlCQUFyQyxFQUF1RHJCLHdCQUFLcUMsVUFBNUQ7QUFDQTFDLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLHlCQUFYLEVBQXNDQyxrQkFBdEMsRUFBa0RDLHdCQUFLc0MsVUFBdkQ7QUFDQTNDLE1BQU0sQ0FBQ1EsSUFBUCxDQUFZLFlBQVosRUFBMEJKLGtCQUExQixFQUFvQ2lCLHNCQUFPRixNQUFQLENBQWMsVUFBZCxDQUFwQyxFQUErRGQsd0JBQUt1QyxjQUFwRTtBQUNBNUMsTUFBTSxDQUFDUSxJQUFQLENBQVksZ0JBQVosRUFBOEJKLGtCQUE5QixFQUF5Q0Msd0JBQUt3QyxhQUE5QztBQUNBN0MsTUFBTSxDQUFDUSxJQUFQLENBQVksc0JBQVosRUFBb0NKLGtCQUFwQyxFQUErQ0Msd0JBQUt5QyxtQkFBcEQ7QUFDQTlDLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGdCQUFYLEVBQTZCQyxrQkFBN0IsRUFBd0NDLHdCQUFLMEMsU0FBN0M7QUFDQS9DLE1BQU0sQ0FBQ1EsSUFBUCxDQUFZLGNBQVosRUFBNEJKLGtCQUE1QixFQUF1Q0Msd0JBQUsyQyxXQUE1QztlQUllaEQsTSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7T2JqZWN0SWR9IGZyb20gJ21vbmdvZGInO1xuaW1wb3J0IHtwYXJhbX0gZnJvbSAnZXhwcmVzcy12YWxpZGF0b3InO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vQ29udHJvbGxlci9Vc2VyQ29udHJvbGxlcic7XG5pbXBvcnQgSnd0VmVyaWZ5IGZyb20gJy4uL01pZGRsZXdhcmVzL0p3dFZlcmlmeSc7XG5pbXBvcnQgVmVyaWZ5QWRtaW5TY29wZSBmcm9tICcuLi9NaWRkbGV3YXJlcy9WZXJpZnlBZG1pblNjb3BlJztcbmltcG9ydCB1cGxvYWQgZnJvbSAnLi4vTWlkZGxld2FyZXMvRmlsZVVwbG9hZGVyJztcblxucm91dGVyLmdldCgnJywgSnd0VmVyaWZ5LCBVc2VyLmluZGV4KTtcbnJvdXRlci5nZXQoJy9reWNyZXF1ZXN0JywgSnd0VmVyaWZ5LCBVc2VyLmt5Y3JlcXVlc3QpO1xuXG5yb3V0ZXIucG9zdCgnL2NoYW5nZS1wYXNzd29yZCcsIEp3dFZlcmlmeSwgVXNlci5jaGFuZ2VQYXNzd29yZCk7XG5cbnJvdXRlci5nZXQoJy9teS12aXNpdG9ycycsIEp3dFZlcmlmeSwgVXNlci5teVZpc2l0b3JzKTtcblxucm91dGVyLmdldCgnL21hdGNoZXMnLCBKd3RWZXJpZnksIFVzZXIubXlCZXN0TWF0Y2hlcyk7XG5cbnJvdXRlci5nZXQoJy9pbnZpdGVzJywgSnd0VmVyaWZ5LCBVc2VyLm15SW52aXRlSGlzdG9yeSk7XG5yb3V0ZXIuZ2V0KCcvaW52aXRlcy1lYXJuJywgSnd0VmVyaWZ5LCBVc2VyLmludml0ZXNFYXJuKTtcblxucm91dGVyLmdldCgnL3RvcC1mYW5zLzppZCcsIEp3dFZlcmlmeSwgVXNlci5teVRvcEZhbnMpO1xucm91dGVyLmdldCgnL3JlY2VudC1mYW5zLzppZCcsIEp3dFZlcmlmeSwgVXNlci5yZWNlbnRGYW5zKTtcblxucm91dGVyLmdldCgnLzppZCcsIEp3dFZlcmlmeSxcbiAgICBwYXJhbSgnaWQnKS5jdXN0b21TYW5pdGl6ZXIodmFsdWUgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdElkKHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgfSksXG4gICAgVXNlci5zaW5nbGUpO1xuXG5yb3V0ZXIucHV0KCcnLCBKd3RWZXJpZnksXG4gICAgdXBsb2FkLmZpZWxkcyhbe1xuICAgICAgICBuYW1lOiAncHJvZmlsZVBpYycsIG1heENvdW50OiAxXG4gICAgfSwge1xuICAgICAgICBuYW1lOiAna3ljSW1hZ2UnLCBtYXhDb3VudDogMVxuICAgIH0sXSksIFVzZXIudXBkYXRlKTtcblxucm91dGVyLnB1dCgnLzppZCcsIEp3dFZlcmlmeSwgVmVyaWZ5QWRtaW5TY29wZSwgdXBsb2FkLnNpbmdsZSgncHJvZmlsZVBpYycpLCBVc2VyLnVwZGF0ZVVzZXJCeUFkbWluKTtcblxucm91dGVyLmRlbGV0ZSgnLzppZCcsIEp3dFZlcmlmeSxcbiAgICBwYXJhbSgnaWQnKS5jdXN0b21TYW5pdGl6ZXIodmFsdWUgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdElkKHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgfSksXG4gICAgVXNlci5yZW1vdmUpO1xuXG5yb3V0ZXIuZ2V0KCcvbWF0Y2gvOnVzZXJJZCcsIEp3dFZlcmlmeSxcbiAgICBwYXJhbSgndXNlcklkJykuY3VzdG9tU2FuaXRpemVyKHZhbHVlID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3RJZCh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgIH0pLCBVc2VyLm1hdGNoUHJvZmlsZSk7XG5cbnJvdXRlci5nZXQoJy9mb2xsb3cvOnVzZXJJZCcsIEp3dFZlcmlmeSxcbiAgICBwYXJhbSgndXNlcklkJykuY3VzdG9tU2FuaXRpemVyKHZhbHVlID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3RJZCh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgIH0pLFxuICAgIFVzZXIuZm9sbG93VW5mb2xsb3dVc2VyKTtcblxucm91dGVyLmdldCgnL2xpa2UvOnVzZXJJZCcsIEp3dFZlcmlmeSxcbiAgICBwYXJhbSgndXNlcklkJykuY3VzdG9tU2FuaXRpemVyKHZhbHVlID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3RJZCh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgIH0pLFxuICAgIFVzZXIubGlrZURpc2xpa2VVc2VyKTtcblxucm91dGVyLmdldCgnL3Jldmlldy86dXNlcklkJywgSnd0VmVyaWZ5LFxuICAgIHBhcmFtKCd1c2VySWQnKS5jdXN0b21TYW5pdGl6ZXIodmFsdWUgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdElkKHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgfSksXG4gICAgVXNlci5yZXZpZXdQcm9maWxlKTtcblxucm91dGVyLnBvc3QoJy9zdWJzY3JpYmUnLCBKd3RWZXJpZnksIFVzZXIuc3Vic2NyaWJlKTtcblxucm91dGVyLnBvc3QoJy9yZWNlbnQvOmlkJywgSnd0VmVyaWZ5LFxuICAgIHBhcmFtKCdpZCcpLmN1c3RvbVNhbml0aXplcih2YWx1ZSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0SWQodmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgIH1cbiAgICB9KSxcbiAgICBVc2VyLnJlY2VudFNpbmdsZSk7XG5cbnJvdXRlci5wb3N0KCcvcmVjZW50JywgSnd0VmVyaWZ5LCBVc2VyLnJlY2VudERlbGV0ZUFsbCk7XG5cbnJvdXRlci5wb3N0KCcvYWRtaW4vcGxhbicsIEp3dFZlcmlmeSwgVmVyaWZ5QWRtaW5TY29wZSwgVXNlci5zdWJzY3JpYmVCeUFkbWluKTtcblxucm91dGVyLnB1dCgnL2Jsb2NrLzppZCcsIEp3dFZlcmlmeSwgVmVyaWZ5QWRtaW5TY29wZSwgVXNlci5ibG9ja1VuYmxvY2tVc2VyKTtcblxucm91dGVyLnBvc3QoJy9naXZlLWF3YXknLCBKd3RWZXJpZnksICBVc2VyLmdpdmVBd2F5VG9Vc2VyKTtcblxucm91dGVyLmdldCgnL2dpdmUtYXdheS9saXN0JywgSnd0VmVyaWZ5LCBWZXJpZnlBZG1pblNjb3BlLCBVc2VyLmdpdmVBd2F5TGlzdCk7XG5cbnJvdXRlci5wdXQoJy92ZXJpZnkvOmlkJywgSnd0VmVyaWZ5LCBWZXJpZnlBZG1pblNjb3BlLCBVc2VyLnZlcmlmeVVzZXIpO1xucm91dGVyLnB1dCgnL3JlamVjdC86aWQnLCBKd3RWZXJpZnksIFZlcmlmeUFkbWluU2NvcGUsIFVzZXIucmVqZWN0VXNlcik7XG5yb3V0ZXIuZ2V0KCcvYWNjZXB0TGlrZS86aWQvOnN0YXR1cycsIEp3dFZlcmlmeSwgIFVzZXIuYWNjZXB0TGlrZSk7XG5yb3V0ZXIucG9zdCgnL2t5Y3VwZGF0ZScsIEp3dFZlcmlmeSx1cGxvYWQuc2luZ2xlKCdreWNJbWFnZScpLCBVc2VyLmt5Y0ltYWdlVXBsb2FkKTtcbnJvdXRlci5wb3N0KCcvZGVsZXRlUmVxdWVzdCcsIEp3dFZlcmlmeSwgVXNlci5kZWxldGVSZXF1ZXN0KTtcbnJvdXRlci5wb3N0KCcvdXBkYXRlRGVsZXRlUmVxdWVzdCcsIEp3dFZlcmlmeSwgVXNlci51cGRhdGVEZWxldGVSZXF1ZXN0KTtcbnJvdXRlci5nZXQoJy9hZG1pbkdpZnQvOmlkJywgSnd0VmVyaWZ5LCBVc2VyLmFkbWluR2lmdCk7XG5yb3V0ZXIucG9zdCgnL3VzZUdpZnRQbGFuJywgSnd0VmVyaWZ5LCBVc2VyLnVzZUdpZnRQbGFuKTtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdfQ==